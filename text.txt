## ğŸ§  Full Prompt for Building JARVIS â€” Self-Evolving AI Telegram Bot

---

**You are an AI responsible for building a powerful, self-editing, self-evolving Telegram bot named `JARVIS`.**
The bot must handle AI prompts, generate working features, track memory, simulate intent, and distinguish between users based on access level.

---

## ğŸ”° OBJECTIVE

Create **JARVIS**, a Telegram bot that:

* Acts as an intelligent chatbot for general users
* Enables **Dev** and **Owner** roles to:

  * Build & test features in a sandbox
  * Confirm and integrate features into the bot
  * Track every AI task and allow undo, revert, diff
* Understands ambiguous intent (e.g., â€œhelp me build...â€) and asks for confirmation
* Logs, secures, and evolves its own file system with task traceability

---

## âœ… CORE FEATURES

### ğŸ¯ General Behavior

* Natural language prompts are the default interface
* All user messages go through intent classification
* AI responses are generated using Gemini Flash 2.5 or similar
* All AI code responses must be:

  * **Pure JSON only**
  * **No markdown or formatting**
  * **No explanations or examples**

> âš ï¸ Examples mentioned in this prompt are only for understanding. The AI must output only clean, working code â€” no sample, no chat, no formatting.

---

## ğŸ§  INTENT SYSTEM

### Intent Types

| Prompt Type                          | Behavior                                        |
| ------------------------------------ | ----------------------------------------------- |
| `"build a rps game"`                 | â†’ Generate code â†’ sandbox it                    |
| `"how to make a rps game?"`          | â†’ Explain it, no code generated                 |
| `"can you help me make a rps game?"` | â†’ Ask: â€œCreate or explain?â€                     |
| `"integrate it"`                     | â†’ Use memory to know which feature to integrate |
| `"add it to the bot"`                | â†’ Same as above                                 |
| `"what is your name?"` (Public)      | â†’ Just a conversation â€” no code, no sandboxing  |

### Role-aware Clarification

* Public users get **AI chatbot answers only**
* Devs/Owners get asked for clarification when prompts are ambiguous
* Even Devs may want to *learn*, not *build* â€” donâ€™t assume every prompt means code

---

## ğŸ” ROLE SYSTEM

| Role   | Permissions                                                                 |
| ------ | --------------------------------------------------------------------------- |
| Owner  | Full access. Add/remove Devs, control mode, use all AI functions            |
| Dev    | Can generate features, use AI tools, sandbox & integrate, run `/undo`, etc. |
| Public | Only gets standard AI answers â€” no file access, no integrations             |

Role data is stored in `config/settings.json`.

---

## ğŸ“¦ SANDBOX + INTEGRATION FLOW

1. **Dev** sends: `"build me a rps game"`
2. JARVIS simulates intent â†’ valid â†’ AI generates code
3. Code is stored in `sandbox/rps/handler.py` (not plugins yet)
4. Dev tests it (e.g. via `/rps`)
5. Dev says: `"integrate it"` or `"confirm"`
6. JARVIS:

   * Uses memory to detect pending task
   * Moves files â†’ `plugins/rps/`
   * Logs action
   * Clears/updates memory

---

## ğŸ§  MEMORY SYSTEM

### Task Memory (`logs/memory.json`)

* Tracks task ID, prompt, chat\_id, files, status
* Used for:

  * `/undo task 17`
  * `/review task 17`
  * Confirmation matching (â€œintegrate itâ€ â†’ Task\_17)

### Chat Memory (`logs/conversations/<chat_id>.json`)

* Natural conversation memory per user
* Used to maintain chat context (like ChatGPT)
* Can be cleared via `/clearhistory`

---

## ğŸ“ FILE SYSTEM BEHAVIOR

### Automatic File Handling

* Every generated file is saved directly (no user intervention)
* Existing files are backed up as `.bak`
* Integration moves files from `sandbox/` to `plugins/`

### Diff & Undo Support

* `/diff <file>` â†’ compares current file to `.bak`
* `/undo <file>` â†’ restores `.bak`
* `/undo task <id>` â†’ reverts full task

---

## ğŸ”Œ PLUGIN SYSTEM

* Plugins live in `plugins/<name>/handler.py`
* Must register via `register_handlers(app, bot)`
* Plugins can be enabled/disabled dynamically
* All integrated plugins must be traceable to a `Task_ID` if AI-generated

---

## ğŸ”„ SELF-EVOLVING INTELLIGENCE

| Feature                | Behavior                                                             |
| ---------------------- | -------------------------------------------------------------------- |
| ğŸ§  Intent Simulation   | Classifies user intent, asks clarification if needed                 |
| ğŸ§ª Regression Checking | After file edits, runs syntax check / tests, auto-reverts on failure |
| ğŸ” Self-debugging      | Captures tracebacks and uses LLM to try patches                      |
| ğŸ§© Plugin traceability | Every plugin built via AI is tagged in memory/logs                   |
| ğŸ§  Autonomous Mode     | Reformat, clean, optimize automatically if in `auto` mode            |

---

## ğŸ“¡ LOGGING SYSTEM

* `logs/ai_activity.log`: All AI prompts/responses
* `logs/memory.json`: All AI tasks
* `logs/conversations/`: Natural language chat history per user
* `logs/memory_backup_*.json`: Periodic memory snapshots for rollback
* `task_channel`: Every AI task is logged here with ID + file list
* `log_channel`: Logs every user interaction + lifecycle events

---

## ğŸ“‹ BASIC COMMANDS (NOW INCLUDED âœ…)

| Command         | Access | Purpose                                         |
| --------------- | ------ | ----------------------------------------------- |
| `/start`        | All    | Welcome message, describes JARVIS features      |
| `/help`         | All    | Lists commands relevant to userâ€™s role          |
| `/info`         | All    | Shows current mode, plugin count, and user role |
| `/tree`         | All    | Sends full project folder layout                |
| `/clearhistory` | All    | Clears chat memory for that user only           |

These are **not generated by AI**, but **hardcoded** inside `command_router.py` or `main.py`.

---

## ğŸ§° ADVANCED DEV COMMANDS

| Command              | Role  | Description                                       |
| -------------------- | ----- | ------------------------------------------------- |
| `/memory`            | Dev   | Shows last 10 AI tasks                            |
| `/clearmemory`       | Dev   | Deletes memory.json                               |
| `/diff <file>`       | Dev   | Shows changes compared to last backup             |
| `/undo <file>`       | Dev   | Restores previous version                         |
| `/undo task <id>`    | Dev   | Reverts all file changes made in a task           |
| `/enable <plugin>`   | Dev   | Enables plugin by name                            |
| `/disable <plugin>`  | Dev   | Disables plugin                                   |
| `/plugins`           | Dev   | Lists all plugins and whether enabled             |
| `/review <file>`     | Dev   | Sends file to LLM for code review + suggestions   |
| `/mode auto/manual`  | Dev   | Switches autonomous reformatting mode             |
| `/adddev <id>`       | Owner | Adds a developer                                  |
| `/removedev <id>`    | Owner | Removes a developer                               |
| `/access dev/public` | Owner | Toggles whether bot is in dev-only or public mode |

---

## ğŸ§  AI MODEL RULES

* Must use only the following output format:

```json
{
  "files": {
    "sandbox/rps/handler.py": "import ...\ndef ...",
    "sandbox/rps/utils.py": "..."
  }
}
```

* Must **not include markdown**
* Must **not include explanations**
* Must **not include code examples**

> âš ï¸ Any examples in this prompt are for understanding only.

---

## ğŸ“ FOLDER STRUCTURE

```
jarvis_bot/
â”œâ”€â”€ core/                          # Orchestration + AI intent routing
â”‚   â”œâ”€â”€ ai_engine.py
â”‚   â”œâ”€â”€ task_manager.py
â”‚   â”œâ”€â”€ sandbox_manager.py
â”‚   â”œâ”€â”€ intent_classifier.py
â”‚   â””â”€â”€ role_manager.py
â”‚
â”œâ”€â”€ modules/                       # Functional logic (non-AI)
â”‚   â”œâ”€â”€ command_router.py          # Registers all Telegram commands
â”‚   â”œâ”€â”€ file_manager.py            # Diff, undo, backups
â”‚   â”œâ”€â”€ plugin_loader.py
â”‚   â””â”€â”€ regression_checker.py
â”‚
â”œâ”€â”€ memory/                        # Memory layers
â”‚   â”œâ”€â”€ memory_manager.py          # Task memory & traceability
â”‚   â”œâ”€â”€ conversation_manager.py    # Per-user conversation memory
â”‚   â””â”€â”€ access_control.py          # Dev/Owner/Public validation
â”‚
â”œâ”€â”€ plugins/                       # Confirmed AI features
â”‚   â””â”€â”€ rps/handler.py
â”‚
â”œâ”€â”€ sandbox/                       # Temporary AI-generated features
â”‚   â””â”€â”€ rps/handler.py
â”‚
â”œâ”€â”€ logs/
â”‚   â”œâ”€â”€ memory.json
â”‚   â”œâ”€â”€ ai_activity.log
â”‚   â”œâ”€â”€ memory_backup_*.json
â”‚   â””â”€â”€ conversations/<chat_id>.json
â”‚
â”œâ”€â”€ uploads/                       # Uploaded .txt prompts
â”œâ”€â”€ db/                            # Plugin data (e.g., todo.json)
â”œâ”€â”€ config/
â”‚   â””â”€â”€ settings.json              # Role list, mode, etc.
â”œâ”€â”€ main.py                        # Telegram bot entry point
â”œâ”€â”€ jarvis_engine.py               # AI model selector + LLM interface
â”œâ”€â”€ error_handler.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env
â””â”€â”€ README.md
```

---

## âœ… SUMMARY

JARVIS is a full-stack self-evolving Telegram AI assistant that:

* Accepts natural language prompts
* Differentiates user roles
* Classifies intent
* Builds features in sandbox
* Integrates only when confirmed
* Tracks every change
* Can rollback, review, or fix itself

---
